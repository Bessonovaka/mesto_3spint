(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=document.querySelector(".popup-big-photo"),n=document.querySelector(".popup-big-photo__image"),r=document.querySelector(".popup-big-photo__text"),o=document.querySelector(".popup-big-photo__close-button"),i=function(){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this._cardSelector=t,this._title=e.name,this._image=e.link}var a,s;return a=i,(s=[{key:"_handleOpenPopup",value:function(){n.src=this._element.firstChild.nextSibling.nextSibling.src,r.textContent=this._element.lastChild.firstChild.textContent,t.classList.add("popup-big-photo_opened")}},{key:"_handleClosePopup",value:function(){t.classList.remove("popup-big-photo_opened")}},{key:"_deleteCard",value:function(e){e.closest(".photo-grid__card").remove()}},{key:"_likeDislike",value:function(e){e.classList.toggle("like-button_fill_black")}},{key:"_setEventListeners",value:function(){var e=this;this._element.addEventListener("click",(function(t){t.target.classList.contains("like-button")||t.target.classList.contains("delete-button")||e._handleOpenPopup()})),o.addEventListener("click",(function(){e._handleClosePopup()})),this._element.querySelector(".delete-button").addEventListener("click",(function(t){e._deleteCard(t.target)})),this._element.querySelector(".like-button").addEventListener("click",(function(t){e._likeDislike(t.target)}))}},{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".photo-grid__card").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".photo-grid__img").src=this._image,this._element.querySelector(".photo-grid__title").textContent=this._title,this._element}}])&&e(a.prototype,s),i}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t,n){var r=t.data,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialArray=r,this._renderer=o,this._container=n}var t,n;return t=e,(n=[{key:"setItem",value:function(e){this._container.prepend(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var e=this;this._initialArray.forEach((function(t){e._renderer(t)}))}}])&&a(t.prototype,n),e}();function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){var n=t.formSelector,r=t.handleFormSubmit;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=n,this._handleFormSubmit=r}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._formSelector).content.querySelector(".form").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._element.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e._element.reset()}))}},{key:"generateForm",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element}},{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._element.querySelectorAll(".form__input"),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}}])&&l(t.prototype,n),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=document.querySelector(t),this._popupOpenBtn=document.querySelector(n),this._popupCloseBtn=document.querySelector(r)}var t,n;return t=e,(n=[{key:"_openPopup",value:function(){var e=this;this._popupOpenBtn.addEventListener("click",(function(){e._popupSelector.classList.add("popup_opened")}))}},{key:"_closePopup",value:function(){var e=this;this._popupCloseBtn.addEventListener("click",(function(){e._popupSelector.classList.remove("popup_opened")})),this._popupSelector.addEventListener("click",(function(t){t.target===e._popupSelector&&e._popupSelector.classList.remove("popup_opened")})),document.addEventListener("keydown",(function(t){"Escape"===t.key&&e._popupSelector.classList.remove("popup_opened")}))}},{key:"tooglePopup",value:function(){this._openPopup(),this._closePopup()}}])&&c(t.prototype,n),e}();function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=document.querySelector(".photo-grid"),f=document.querySelector(".popup-create-card"),m=document.querySelector(".popup-edit-profile"),h=new s({data:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){var t=new i(e,"#photo-grid-card").generateCard();h.setItem(t)}},_);h.renderItems();var v=new u({formSelector:"#form-create-card",handleFormSubmit:function(e){var t=new i(e,"#photo-grid-card").generateCard();_.prepend(t),f.classList.remove("popup_opened")}}).generateForm();new s({data:[]},f).setItem(v);var y=new u({formSelector:"#form-edit-profile",handleFormSubmit:function(e){var t=document.querySelector(".profile__title"),n=document.querySelector(".profile__subtitle");t.textContent=e.name,n.textContent=e.profession,m.classList.remove("popup_opened")}}).generateForm();new s({data:[]},m).setItem(y),new p(".popup-edit-profile",".edit-button",".popup-edit-profile__close-button").tooglePopup(),new p(".popup-create-card",".add-button",".popup-create-card__close-button").tooglePopup(),new function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"_showInputError",(function(e,t,r){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add(n._inputErrorClass),o.textContent=r,o.classList.add(n._errorClass)})),d(this,"_hideInputError",(function(e,t){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(n._inputErrorClass),r.classList.remove(n._errorClass),r.textContent=""})),d(this,"_checkInputValidity",(function(e,t){t.validity.valid?n._hideInputError(e,t):n._showInputError(e,t,t.validationMessage)})),d(this,"_hasInvalidInput",(function(e){return e.some((function(e){return!e.validity.valid}))})),d(this,"_toggleButtonState",(function(e,t){n._hasInvalidInput(e)?(t.classList.add(n._inactiveButtonClass),t.disabled=!0):(t.classList.remove(n._inactiveButtonClass),t.disabled=!1)})),d(this,"_setEventListeners",(function(e){var t=Array.from(e.querySelectorAll(n._inputSelector)),r=e.querySelector(n._submitButtonSelector);n._toggleButtonState(t,r),t.forEach((function(o){o.addEventListener("input",(function(){n._checkInputValidity(e,o),n._toggleButtonState(t,r)}))}))})),d(this,"enableValidation",(function(){Array.from(document.querySelectorAll(n._formSelector)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),Array.from(e.querySelectorAll(".form__set")).forEach((function(e){n._setEventListeners(e)}))}))})),this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass}({formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"submit-button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"}).enableValidation()})();